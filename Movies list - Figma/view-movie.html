<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="create-style.css">
    <title>Create a new movie</title>
</head>

<script>

    document.addEventListener('DOMContentLoaded', () => {
        let movies = JSON.parse(localStorage.getItem('movies')) || [];
        const textBox = document.getElementById('title');
        const publishBox = document.getElementById('publishing');
        const container = document.querySelector(".container")
        // const deleteBtn = document.getElementById("delBtn");
        const box = document.querySelector(".box")

        const imgInBox = document.createElement("img")

        const url = new URLSearchParams(window.location.search)
        const index = url.get('id')
        // let key = `movie_${index}`
        let data = movies[index]
        console.log('index', index, data.img)

        // if (index !== null && movies[index]) {
        // let data = movies[index];

        imgInBox.src = data.img;
        imgInBox.style.maxWidth = "100%";
        imgInBox.style.borderRadius = "10px";

        if (data.img) {
            box.style.display = "none";
        }

        container.appendChild(imgInBox);
        textBox.value = data.text;
        publishBox.value = data.year;

        // deleteBtn.addEventListener('click', () => {
        //     let confirmDelete = confirm("Are you sure you want to delete this movie?");
        //     if (confirmDelete && index) {
        //         movies.splice(index, 1)
        //         localStorage.setItem("movies", JSON.stringify(movies))
        //         window.location.href = "movie-list.html"
        //         console.log('deleted')
        //     }
        // })
    });


</script>

<body>

    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <!-- <a class="navbar-brand" href="#">Navbar</a> -->
            <img src="logo.png" width="200px" alt="" style="cursor: pointer;">
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <!-- <li class="nav-item mx-3">
                        <a class="nav-link active" aria-current="page" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="update-movie.html">Edit</a>
                    </li> -->
                    <li class="nav-item dropdown mx-3">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" data-bs-toggle="dropdown"
                            aria-expanded="false" style="color: #2BD17E;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" viewBox="0 0 448 512">
                                <path fill="#2BD17E"
                                    d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z" />
                            </svg>
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="logout mx-3 my-3" href="#">User</a></li>
                            <a href="signUpPage.html" class="logout mx-3 my-3">Logout <svg width="15px" height="15px"
                                    xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"
                                    style="cursor: pointer;margin-left: 10px;">
                                    <path fill="grey"
                                        d="M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z" />
                                </svg></a>
                            <!-- <li><a class="dropdown-item" href="#">Another action</a></li> -->
                            <!-- <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li> -->
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <section class="lower">
        <h2 class="my-3 text-white">View movie</h2>

        <div class="container">
            <div class="box">
                <svg xmlns="http://www.w3.org/2000/svg" width="22px" height="22px" viewBox="0 0 512 512"
                    style="cursor: pointer;">
                    <path fill="#ffffff"
                        d="M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z" />
                </svg>
                <p class="text-white">Drop an image here</p>
            </div>
        </div>

        <div class="form mt-5">
            <input class="text-white" type="text" name="title" id="title" placeholder="Title">
            <input class="text-white" type="text" name="publishing" id="publishing" placeholder="Publishing Year">
            <!-- <div class="d-flex flex-row mt-5"> -->
            <div class="mt-5">
                <!-- <button class="cancel px-5 py-2 rounded fw-bold">Cancel</button> -->
                <!-- <button id="delBtn" class="submit px-5 py-2 rounded fw-bold">Delete</button> -->
            </div>
        </div>
    </section>

</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

</html>